# Smart Contracts

Shadow Driveのスマートコントラクトは、多様なユースケースを想定して設計されており、スマートコントラクトの設計に内在する汎用性を示しています。この適応性は、全く新しいブロックチェーンを開発するのではなく、ストレージレイヤーを構築する際に大きな利点となります。結局のところ、世界で最もパフォーマンスの高いグローバルステートマシンを自由に活用できるのに、なぜ新しいブロックチェーンを作るのでしょうか？

## The Shadow Drive Smart Contracts

### Gossip-driven Consensus

Paxosのコンセンサスメカニズムは非常に素晴らしく、間違いなくProof of Historyコンセンサスメカニズムの前身となるものです。ゴシップ駆動型コンセンサスネットワークへのアプローチとして、広く影響を及ぼしています。

ゴシップ駆動型コンセンサスメカニズムは、分散型システムで合意を達成するための効率的で耐障害性の高い手段を提供し、注目に値します。このアプローチは、分散型Shadow Driveアーキテクチャとともに、Shadow Driveスマートコントラクトインタラクションの基礎を形成しています。

Shadow Drive内では、複数のノードが連携してストレージ層を維持し、データの整合性を確保し、不正な変更から守っています。これらのノードはSolanaバリデーターのようなもので、Shadow Driveに保存されているすべてのデータの状態を守る守護者と考えることができます。

これらのノードは、任意のマシンでホストすることができ、オンチェーンで記録されるコンセンサス投票に参加できるため、Shadow Driveの分散化を実現します。今後、Shadow Dirveの運営者がネットワークの一員となることを希望する場合、Project Serumで利用されているSerum/Mega-Serumノード構造に似た、より高い斬新さと担保要件が課されます。

Shadow Driveスマートコントラクトは管理者として、アクセスを制御し、ストレージ層へのアップロードや編集を管理します。さらに、ノードはその状態と投票をSolanaバリデーターネットワークに報告し、検証してオンチェーンに含めるように構成されています。このオンチェーン機構により、悪意のある活動を試みるノードやShadow Driveのデータストアの完全性を維持できないノードを記録して切り捨てることができます。このプロセスは、SolanaバリデーターネットワークがSolanaバリデーターの投票履歴を記録し報告する方法に酷似しており、Shadow Driveが信頼できるパーミッションレスネットワークであり続けることを保証しています。

要約すると、Shadow Drive内のノードは、軽量のゴシップ駆動型コンセンサスメカニズムを実行し、スマートコントラクトは、このコンセンサスの活動が信頼されず、チェーン上のすべての人に透明であることを保証しています。

データのアップロードと編集は、データへのアクセスとは異なることに注意してください。Shadow Driveをストレージとして使用するプロジェクトは、アップロードされたデータを読むことができる人を制御することができ、望ましいレベルのプライバシーとアクセス制御を確保することができます。

### Balancing Mutable and Immutable Storage Needs: Adapting to Evolving Storage Requirements with Shadow Drive

ユーザーの要求が多様であることを理解した上で、可変と不変の両方のデータ保存に対応する柔軟なストレージソリューションを提供することに努めています。すべてのデータが永久に保存される必要はないという事実を認識し、ユーザーのニーズに最も適した保存方法を選択する自由を提供するのが私たちのアプローチです。

Shadow Driveのトークンである[SHDW](https://docs.shadow.cloud/reference/shdw-token)は、ストレージの基本単位に重点を置き、「Shades」と呼ばれる基本単位に分割することができます。このShadesとバイトの関係は、簡単にするために維持されています：

* 1,000,000,000 Shades = 1 [SHDW](https://docs.shadow.cloud/reference/shdw-token)
* 1,000,000,000 bytes = 1 gigabyte

したがって、1バイト保存＝1Shadeとなります。

#### **Immutable Storage**

不変ストレージは、データが永久に保持され、編集や削除ができないという安心感をユーザーに提供します。不変ストレージのコスト計算は簡単で、スマートコントラクトはシャドーノードを操作するための排出として、適切な量の[SHDW](https://docs.shadow.cloud/reference/shdw-token)をシャドーオペレータースマートコントラクトに送ります。

#### **Mutable Storage**

一方、可変ストレージは、短期的なストレージのニーズと、可変ストレージに典型的に関連する帯域幅要件の増加に対処する、より複雑なプロセスを伴います。このプロセスには、Solanaのオンチェーンアカウント設計に似たステーキングとレントの仕組みが組み込まれています。

ユーザーはShadow Driveにデータをアップロードする際、特定の量の[SHDW](https://docs.shadow.cloud/reference/shdw-token)を賭けなければなりません。賃料は、システムが進化するにつれて変更される可能性があり、ミュータブルストレージのエポックごとに評価されます。各エポックで評価された賃料は、シャドーオペレータースマートコントラクトに送られ、スマートコントラクトがシャドーオペレーターに排出として支払うプールに貢献します。

### **Adapting Storage Requirements with DAGGER and Shadow Drive v2**

私たちのスマートコントラクトデザインは、可変と不変の両方のストレージオプションに効果的に対応するように調整されています。DAGGERとShadow Drive v2の進化に伴い、価格設定とシステム全体が適応し、ユーザーに最も効率的で柔軟なストレージソリューションを提供することができます。

私たちは、ユーザーがデータ保存の好みについて十分な情報を得た上で選択でき、多様な保存要件に適応できるシステムにアクセスできるようにすることを約束します。

_シャドウドライブとシャドウオペレーターの長期的な生存を保証するために、チームはストレージの設計とコストに関するあらゆる側面を変更する権利を留保しています。私たちは、予期せぬ問題に対処するために毎回新しいプロトコルを構築するのではなく、途中で1つのプロトコルに微調整を加えることを望んでいます。_
